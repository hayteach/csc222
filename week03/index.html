<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 3: Pointers & Destructors (C++)</title>
    <link rel="stylesheet" href="../styles.css">
    </style>
</head>
<body>
    <a class="skip-to-main" href="#main-content">Skip to main content</a>

    <button id="menuBtn" aria-label="Toggle table of contents" aria-expanded="false">
        <span class="emoji" aria-hidden="true">üìë</span> Menu
    </button>
    
    <nav id="tableOfContents" role="navigation" aria-label="Table of contents">
        <h3>Contents</h3>
        <ul>
            <li><a href="#pointers">What is a Pointer?</a></li>
            <li><a href="#symbols">Symbols & Examples</a></li>
            <li><a href="#destructors">Destructors & Memory Management</a></li>
            <li><a href="#examples">Examples & Pitfalls</a></li>
            <li><a href="#key-takeaways">Key Takeaways</a></li>
            <li><a href="#additional-resources">Additional Resources</a></li>
            <li><a href="#quiz">Quiz</a></li>
            
        </ul>
    </nav>
    <div class="container">
        <header>
            <h1>Week 3: Pointers & Destructors</h1>
            <p>Understanding addresses, dynamic memory, and safe cleanup in C++ üîß</p>
        </header>

        <main id="main-content" class="content" tabindex="-1" role="main">
            <div class="important-note">
                <strong>üß† Quick note:</strong> Pointers let you work directly with memory addresses. They are powerful but require care ‚Äî especially with dynamic allocation and deallocation.
            </div>

            <section class="section" id="pointers">
                <h2>üìå What is a Pointer?</h2>
                <p>A pointer is a variable that stores the memory address of another value. Unlike Java or Python where references are managed for you, in C++ you explicitly create, use, and (sometimes) delete pointers.</p>

                <h3>Why care?</h3>
                <ul>
                    <li>Efficient low-level data manipulation</li>
                    <li>Dynamic memory: create objects that outlive the scope where they're created</li>
                    <li>Essential for advanced data structures (linked lists, trees) and APIs</li>
                </ul>
            </section>

            <section class="section" id="symbols">
                <h2>üî£ Pointer Symbols & Meaning</h2>
                <table style="width:100%; border-collapse: collapse;" border="1" aria-labelledby="symbols-caption">
                    <caption id="symbols-caption" style="text-align:left; padding:8px; font-weight:700;">Symbols & Common Pitfalls</caption>
                    <thead>
                        <tr>
                            <th scope="col" style="text-align:left; padding:8px;">Symbol</th>
                            <th scope="col" style="text-align:left; padding:8px;">Meaning / Example</th>
                            <th scope="col" style="text-align:left; padding:8px;">Common Pitfalls</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row" style="padding:8px;"><code>*</code></th>
                            <td style="padding:8px;"><p>The <code>*</code> defines a variable as a pointer and is used to dereference a pointer to access or modify the value stored at that address.</p>
                                <p><strong>Declaration:</strong> <code>int* p = nullptr;</code></p>
                                <p><strong>Dereference example:</strong> <code>*p = 5;</code> ‚Äî writes the value 5 into the location pointed to by <code>p</code>.</p>
                            </td>
                            <td style="padding:8px;">Dereferencing a <code>nullptr</code> or an uninitialized pointer causes undefined behavior; always initialize and check before use.</td>
                        </tr>
                        <tr>
                            <th scope="row" style="padding:8px;"><code>&amp;</code></th>
                            <td style="padding:8px;"><p>The <code>&amp;</code> operator returns the address of a variable (its memory location).</p>
                                <p><strong>Example:</strong> <code>int x = 3; int* p = &amp;x;</code> ‚Äî <code>p</code> now stores the address of <code>x</code>.</p>
                            </td>
                            <td style="padding:8px;">Avoid storing the address of a variable that goes out of scope (returning address of a local) ‚Äî leads to dangling pointers.</td>
                        </tr>
                        <tr>
                            <th scope="row" style="padding:8px;"><code>-&gt;</code></th>
                            <td style="padding:8px;"><p>The <code>-&gt;</code> operator accesses members of an object through a pointer to that object.</p>
                                <p><strong>Example:</strong> <code>card c('s',3); card* pc = &amp;c; pc->getValue();</code></p>
                            </td>
                            <td style="padding:8px;">Using <code>-></code> on a <code>nullptr</code> or invalid object pointer causes crashes; always ensure the pointer is valid.</td>
                        </tr>
                    </tbody>
                </table>

                <div class="code-box" role="region" aria-label="Pointer code example" tabindex="0">
<pre>// Create a pointer
int n = 10;
int* p = &n;        // p stores the address of n
cout << "n: " << n << " | address: " << p << endl;

// Dereference
*p = 20;           // changes n through the pointer
cout << "n now: " << n << endl;

// Dynamic allocation
int* arr = new int[5]; // allocate 5 ints on the heap
arr[0] = 42;
// ...
delete[] arr;           // free heap memory when done</pre>
                </div>

                <div class="note">
                    <strong>‚ö†Ô∏è Tip:</strong> Always initialize pointers (e.g., <code>nullptr</code>) and free dynamically allocated memory with <code>delete</code> or <code>delete[]</code> when appropriate.
                </div>
            </section>

            <section class="section" id="destructors">
                <h2>üßπ Destructors & Memory Management</h2>
                <p>Destructors are special member functions that run when an object is destroyed. Use them to free resources (memory, file handles) that the object acquired during its lifetime.</p>
                <div class="code-box" role="region" aria-label="Destructor code example" tabindex="0">
            <pre>class Foo {
            public:
                Foo() { ptr = new int[10]; }
                ~Foo() { delete[] ptr; }
            private:
                int* ptr;
            };

            // RAII: prefer patterns where acquisition and release are tied to object lifetime.
            // Better: use smart pointers
            #include &lt;memory&gt;
            std::unique_ptr&lt;int[]&gt; arr = std::make_unique&lt;int[]&gt;(10); // auto freed
            </pre>
                </div>
                <p>Modern C++ recommends RAII and smart pointers (<code>std::unique_ptr</code>, <code>std::shared_ptr</code>) to avoid manual <code>new</code>/<code>delete</code> bookkeeping.</p>
            </section>

            <section class="section" id="examples">
                <h2>üîç Examples & Common Pitfalls</h2>

                <h3>Null and dangling pointers</h3>
                <div class="code-box" role="region" aria-label="Null/dangling pointers example" tabindex="0">
            <pre>// Null pointer safe check
            int* p = nullptr;
            if (p) { *p = 5; } // check before dereferencing

            // Dangling pointer example
            int* q = new int(5);
            delete q; // q now dangling; set to nullptr to avoid reuse
            q = nullptr;
            </pre>
                </div>

                <h3>Mismatched delete / delete[]</h3>
                <div class="code-box" role="region" aria-label="delete[] example" tabindex="0">
            <pre>int* a = new int[5];
            // wrong: delete a;  // leads to undefined behavior
            delete[] a; // correct
            </pre>
                </div>

                <h3>Double delete</h3>
                <p>Never call <code>delete</code> on the same pointer more than once. Reset pointers to <code>nullptr</code> after deleting, or better, use smart pointers.</p>
            </section>

            <section class="key-takeaway" id="key-takeaways">
                <h3>‚úÖ Key Takeaways</h3>
                <ul>
                    <li>Pointers store addresses; use <code>*</code> to dereference, <code>&amp;</code> to get an address, and <code>-&gt;</code> to access members through a pointer.</li>
                    <li>Always initialize pointers and check for <code>nullptr</code> before dereferencing.</li>
                    <li>When you allocate with <code>new</code>, free with <code>delete</code> or <code>delete[]</code> accordingly; prefer smart pointers to avoid errors.</li>
                    <li>Use destructors and RAII to ensure resources are freed reliably.</li>
                </ul>
            </section>
            <section class="section" id="additional-resources">
                <h2>üîó Additional Resources</h2>
                <ul>
                    <li><a href="https://youtu.be/_JAoGvOPT7A" target="_blank" rel="noopener">Pointers: Crash Course</a></li>
                    <li><a href="https://youtu.be/o3CaZyVxkwg" target="_blank" rel="noopener">Why we need Destructors</a></li>
                    <li>Files used in the demo: <a href="https://mendocino.instructure.com/courses/21391/files/2620330?wrap=1" target="_blank" rel="noopener">pointers.zip</a></li>
                </ul>
            </section>

        <section class="quiz-section" id="quiz">
            <h2>üìù Quick Quiz (Check your understanding)</h2>

            <div class="quiz-question" id="q1">
                <h4>1) What does <code>int* p;</code> declare?</h4>
                <label><input type="radio" name="q1" value="a"> A variable that stores an int value</label>
                <label><input type="radio" name="q1" value="b"> A variable that stores the address of an int</label>
                <label><input type="radio" name="q1" value="c"> A function returning an int</label>
                <button class="check-answer-btn" onclick="checkAnswer('q1', 'b', 1)">Check Answer</button>
                <div class="feedback" id="feedback1" role="status" aria-live="polite" aria-atomic="true" tabindex="-1" style="display:none"></div>
            </div>

            <div class="quiz-question" id="q2">
                <h4>2) Which operator gives the address of a variable?</h4>
                <label><input type="radio" name="q2" value="a"> *</label>
                <label><input type="radio" name="q2" value="b"> -&gt;</label>
                <label><input type="radio" name="q2" value="c"> &amp;</label>
                <button class="check-answer-btn" onclick="checkAnswer('q2', 'c', 2)">Check Answer</button>
                <div class="feedback" id="feedback2" role="status" aria-live="polite" aria-atomic="true" tabindex="-1" style="display:none"></div>
            </div>

            <div class="quiz-question" id="q3">
                <h4>3) Which is the correct way to free an array allocated with <code>new int[5]</code>?</h4>
                <label><input type="radio" name="q3" value="a"> delete ptr;</label>
                <label><input type="radio" name="q3" value="b"> delete[] ptr;</label>
                <label><input type="radio" name="q3" value="c"> free(ptr);</label>
                <button class="check-answer-btn" onclick="checkAnswer('q3', 'b', 3)">Check Answer</button>
                <div class="feedback" id="feedback3" role="status" aria-live="polite" aria-atomic="true" tabindex="-1" style="display:none"></div>
            </div>

            <div class="quiz-question" id="q4">
                <h4>4) What does a destructor do?</h4>
                <label><input type="radio" name="q4" value="a"> Initializes member variables</label>
                <label><input type="radio" name="q4" value="b"> Cleans up resources when an object is destroyed</label>
                <label><input type="radio" name="q4" value="c"> Allocates dynamic memory</label>
                <button class="check-answer-btn" onclick="checkAnswer('q4', 'b', 4)">Check Answer</button>
                <div class="feedback" id="feedback4" role="status" aria-live="polite" aria-atomic="true" tabindex="-1" style="display:none"></div>
            </div>

            <div class="mt-20">
                <button class="check-answer-btn" onclick="checkAll({q1: 'b', q2: 'c', q3: 'b', q4: 'b'})">Check All</button>
                <div id="quiz-summary" role="status" aria-live="polite" aria-atomic="true" tabindex="-1" style="margin-top:12px;font-weight:700"></div>
            </div>
        </section>

        <div class="important-note">
            <strong>üí° Next steps:</strong> Try the examples in <code>pointers.zip</code>, then refactor to use <code>std::unique_ptr</code> where possible.
        </div>

    </main>
</div>
<!-- Back to Top Button -->
<button id="backToTop" title="Back to Top" aria-label="Back to top">‚Üë</button>
<script src="../scripts.js"></script>
</body>
</html>